{"version":3,"sources":["webpack:///webpack/bootstrap d3da38c32ffdceb48eb2","webpack:///./src/index.js","webpack:///external \"lodash.isstring\"","webpack:///external \"mobx\"","webpack:///./src/walkieTalkie.js","webpack:///external \"socket.io-client\"","webpack:///external \"shortid\""],"names":["shortid","require","extras","shareGlobalState","globalTrackingState","wiretap","appName","options","isString","Error","port","initializeWalkieTalkie","onUpdate","handleUpdate","payload","emitInitialize","app","inspect","name","thingToTrack","isObservableArray","handleObservableArray","isObservable","handleObservableObject","Object","keys","forEach","nestedThingToTrack","key","log","obj","id","generate","emitChange","value","observableArray","observableObject","observe","observableThing","trackerId","namespace","new_value","startSpying","spy","event","type","emitSpy","data","socket","initialize","handlers","io","on","emit"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d3da38c32ffdceb48eb2","import isString from \"lodash.isstring\";\r\nimport {\r\n  observe,\r\n  isObservable,\r\n  isObservableArray,\r\n  runInAction,\r\n  spy,\r\n  extras\r\n} from \"mobx\";\r\nimport initializeWalkieTalkie, {\r\n  emitChange,\r\n  emitSpy,\r\n  emitInitialize\r\n} from \"./walkieTalkie\";\r\nconst shortid = require(\"shortid\");\r\n\r\nextras.shareGlobalState();\r\nconst globalTrackingState = {};\r\n\r\nexport function wiretap(appName, options = {}) {\r\n  if (!isString(appName)) {\r\n    throw new Error(\"First parameter should be the application name.\");\r\n  }\r\n\r\n  const port = options.port ? options.port : 4000;\r\n  initializeWalkieTalkie(port, {\r\n    onUpdate: payload => {\r\n      handleUpdate(payload);\r\n    }\r\n  });\r\n\r\n  // emits a reset event which clears the dashboard\r\n  emitInitialize({\r\n    app: appName\r\n  });\r\n}\r\n\r\nexport function inspect(name, thingToTrack) {\r\n  if (!isString(name)) {\r\n    throw new Error(\"First parameter should be a string.\");\r\n  }\r\n\r\n  if (isObservableArray(thingToTrack)) {\r\n    handleObservableArray(name, thingToTrack);\r\n  } else if (isObservable(thingToTrack)) {\r\n    handleObservableObject(name, thingToTrack);\r\n  } else {\r\n    // if the thing provided thing for inspection is not an observable itself, interate the keys\r\n    // and start tracking observable properties recursively. Don't you feel good when you implement a\r\n    // recursion. I do every damn time!\r\n    Object.keys(thingToTrack).forEach(key => {\r\n      const nestedThingToTrack = thingToTrack[key];\r\n      inspect(`${name}.${key}`, nestedThingToTrack);\r\n    });\r\n  }\r\n}\r\n\r\nexport function log(name, obj) {\r\n  if (!isString(name)) {\r\n    throw new Error(\"First parameter should be a string.\");\r\n  }\r\n\r\n  const id = shortid.generate();\r\n  emitChange({\r\n    id,\r\n    name,\r\n    value: obj,\r\n    isObservable: false\r\n  });\r\n}\r\n\r\nfunction handleObservableArray(name, observableArray) {\r\n  const id = shortid.generate();\r\n  globalTrackingState[id] = observableArray;\r\n  emitChange({\r\n    id,\r\n    name,\r\n    value: observableArray,\r\n    isObservable: true\r\n  });\r\n}\r\n\r\nfunction handleObservableObject(name, observableObject) {\r\n  const id = shortid.generate();\r\n  globalTrackingState[id] = observableObject;\r\n  // observe the observable for futre updates\r\n  observe(observableObject, () => {\r\n    emitChange({\r\n      id,\r\n      name,\r\n      value: observableObject,\r\n      isObservable: true\r\n    });\r\n  });\r\n\r\n  // but also send the initial values to the dashboard\r\n  emitChange({\r\n    id,\r\n    name,\r\n    value: observableObject,\r\n    isObservable: true\r\n  });\r\n}\r\n\r\nfunction handleUpdate(payload) {\r\n  let observableThing = globalTrackingState[payload.trackerId];\r\n  payload.namespace.forEach(key => {\r\n    observableThing = observableThing[key];\r\n  });\r\n  observableThing[payload.name] = payload.new_value;\r\n}\r\n\r\n// not yet exposed\r\nfunction startSpying() {\r\n  spy(event => {\r\n    if (event.type === \"action\") {\r\n      emitSpy({\r\n        name: event.type,\r\n        data: event\r\n      });\r\n    }\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"lodash.isstring\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash.isstring\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"mobx\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mobx\"\n// module id = 3\n// module chunks = 0","import io from \"socket.io-client\";\r\nlet socket = null;\r\n\r\nexport default function initialize(port, handlers) {\r\n  socket = io(`http://localhost:${port}`);\r\n  socket.on(\"update\", handlers.onUpdate);\r\n}\r\n\r\nexport function emitChange(payload) {\r\n  socket.emit(\"change\", payload);\r\n}\r\n\r\nexport function emitInitialize(payload) {\r\n  socket.emit(\"initialize\", payload);\r\n}\r\n\r\nexport function emitSpy(payload) {\r\n  socket.emit(\"spy\", payload);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/walkieTalkie.js","module.exports = require(\"socket.io-client\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io-client\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"shortid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"shortid\"\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}